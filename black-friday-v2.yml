apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: v-black-friday-v2-
  annotations: {pipelines.kubeflow.org/kfp_sdk_version: 1.0.0, pipelines.kubeflow.org/pipeline_compilation_time: '2021-11-24T10:42:13.157086',
    pipelines.kubeflow.org/pipeline_spec: '{"name": "v=black-friday-v2"}'}
  labels: {pipelines.kubeflow.org/kfp_sdk_version: 1.0.0}
spec:
  entrypoint: v-black-friday-v2
  templates:
  - name: clean-data
    container:
      args: []
      command: [python, index.py --dataset, /tmp/inputs/Dataset/data, --data, /tmp/outputs/Data/data]
      image: stevedev7/black-friday:clean-data
    inputs:
      artifacts:
      - {name: copy-data-Dataset, path: /tmp/inputs/Dataset/data}
    outputs:
      artifacts:
      - {name: clean-data-Data, path: /tmp/outputs/Data/data}
    metadata:
      annotations: {pipelines.kubeflow.org/component_spec: '{"description": "Fill
          Nan values and generate dummy variables", "implementation": {"container":
          {"command": ["python", "index.py --dataset", {"inputPath": "Dataset"}, "--data",
          {"outputPath": "Data"}], "image": "stevedev7/black-friday:clean-data"}},
          "inputs": [{"description": "Path to the dataset", "name": "Dataset", "type":
          "LocalPath"}], "name": "Clean Data", "outputs": [{"description": "Path to
          processed dataset", "name": "Data", "type": "LocalPath"}]}', pipelines.kubeflow.org/component_ref: '{"digest":
          "114beef43dc7b7c72828e0c7afb586819a233137e96aa99297af9b5cc12cab74", "url":
          "components/clean-data/clean-data.yml"}'}
  - name: copy-data
    container:
      args: []
      command: [python, index.py, --dataset, /tmp/outputs/Dataset/data, --sample,
        /tmp/outputs/Sample/data]
      image: stevedev7/black-friday:copy-data
    outputs:
      artifacts:
      - {name: copy-data-Dataset, path: /tmp/outputs/Dataset/data}
      - {name: copy-data-Sample, path: /tmp/outputs/Sample/data}
    metadata:
      annotations: {pipelines.kubeflow.org/component_spec: '{"description": "Copy
          datasets", "implementation": {"container": {"command": ["python", "index.py",
          "--dataset", {"outputPath": "Dataset"}, "--sample", {"outputPath": "Sample"}],
          "image": "stevedev7/black-friday:copy-data"}}, "name": "Copy Data", "outputs":
          [{"description": "Path where the dataset is stored", "name": "Dataset",
          "type": "LocalPath"}, {"description": "Path where the sample data is stored",
          "name": "Sample", "type": "LocalPath"}]}', pipelines.kubeflow.org/component_ref: '{"digest":
          "d7aa60606c6fb881901ef27b0c1937731c8247d11a512108f88406c9a498b890", "url":
          "components/copy-data/copy-data.yml"}'}
  - name: feature-scaling
    container:
      args: []
      command: [python, index.py, --data, /tmp/inputs/Data/data, --x-train, /tmp/outputs/XTrain/data,
        --y-train, /tmp/outputs/YTrain/data, --x-test, /tmp/outputs/XTest/data, --y-test,
        /tmp/outputs/YTest/data]
      image: stevedev7/black-friday:feature-engineering
    inputs:
      artifacts:
      - {name: clean-data-Data, path: /tmp/inputs/Data/data}
    outputs:
      artifacts:
      - {name: feature-scaling-XTest, path: /tmp/outputs/XTest/data}
      - {name: feature-scaling-XTrain, path: /tmp/outputs/XTrain/data}
      - {name: feature-scaling-YTest, path: /tmp/outputs/YTest/data}
      - {name: feature-scaling-YTrain, path: /tmp/outputs/YTrain/data}
    metadata:
      annotations: {pipelines.kubeflow.org/component_spec: '{"implementation": {"container":
          {"command": ["python", "index.py", "--data", {"inputPath": "Data"}, "--x-train",
          {"outputPath": "XTrain"}, "--y-train", {"outputPath": "YTrain"}, "--x-test",
          {"outputPath": "XTest"}, "--y-test", {"outputPath": "YTest"}], "image":
          "stevedev7/black-friday:feature-engineering"}}, "inputs": [{"description":
          "Path to processed dataset", "name": "Data", "type": "LocalPath"}], "name":
          "Feature scaling", "outputs": [{"name": "XTrain", "type": "LocalPath"},
          {"name": "YTrain", "type": "LocalPath"}, {"name": "XTest", "type": "LocalPath"},
          {"name": "YTest", "type": "LocalPath"}]}', pipelines.kubeflow.org/component_ref: '{"digest":
          "35299b5b594e0f1b9d17d0eb9687a1c384437face864764a20f31d34fd413790", "url":
          "components/feature-engineering/feature-engineering.yml"}'}
  - name: v-black-friday-v2
    dag:
      tasks:
      - name: clean-data
        template: clean-data
        dependencies: [copy-data]
        arguments:
          artifacts:
          - {name: copy-data-Dataset, from: '{{tasks.copy-data.outputs.artifacts.copy-data-Dataset}}'}
      - {name: copy-data, template: copy-data}
      - name: feature-scaling
        template: feature-scaling
        dependencies: [clean-data]
        arguments:
          artifacts:
          - {name: clean-data-Data, from: '{{tasks.clean-data.outputs.artifacts.clean-data-Data}}'}
  arguments:
    parameters: []
  serviceAccountName: pipeline-runner
